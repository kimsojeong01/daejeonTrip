<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=\, initial-scale=1.0">
  <!-- !Mixed content ë¬¸ì œ í•´ê²° ë°©ë²• -->
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  <title>ëŒ€ì „ìœ¼ë¡œ ì—¬í–‰ê°€ì</title>
  <!-- íŒŒë¹„ì½˜ -->
  <link rel="shortcut icon" href="./image/favion/fav32.png">
  <link rel="apple-touch-icon" href="./image/favion/fav180.png">
  <!-- CSS only -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <!-- jQueryë¥¼ import í•©ë‹ˆë‹¤ -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <style>
    body {
      font-family: 'Noto Sans KR', sans-serif;
      letter-spacing: -0.01rem;
    }

    section {
      margin-top: 60px;
      display: flex;
      justify-content: space-around;
    }
    /* section div {
    } */
    h1 {
      margin-top: 40px;
      letter-spacing: -0.08rem;
      font-weight: bold;
    }
    .top_text {
      color: #999999;
    }

    input {
      margin-top: 24px;
      padding: 20px 36px;
      border: none;
      border-radius: 16px;
      cursor: pointer;
      font-weight: bold;
    }
    input:hover {
      background-color: aquamarine;
    }

    table {
      margin-top: 40px;
    }

    article {
      margin-top: 60px;
      width: 100%;
      height: 64px;
      background-color: #f5f5f5;
      padding: 20px;
    }
    article div h2 {
      font-size: 20px;
      font-weight: bold;
      margin: 0 !important;
      /* í”Œë¡¯ */
      float: left;
    }
    article div p {
      font-size: 18px;
      font-weight: 500;
      margin: 0 !important;
      /* í”Œë¡¯ */
      float: right;
    }

    footer {
      margin-top: 60px;
      padding-bottom: 60px;
      text-align: center;
      color: #999999;
    }

    @media screen and (max-width:1200px){
      .container {
        padding: 0px 20px !important;
      }
      section {
        display: block;
        justify-content: none;
      }
      img {
        width: 100%;
      }
    }


  </style>
</head>
<body>
  <div class="container">
    <section>
      <div>
        <img src="./image/Rectangle.png" alt="ëŒ€ì „ê³µì‹í¬ìŠ¤í„°">
      </div>
  
      <div>
        <h1>ëŒ€ì „ê´‘ì—­ì‹œ ê´€ê´‘ì§€ ì¶”ì²œ</h1>
        <p class="top_text">ì–´ì©Œë©´ ì¢‹ì•„!! ì§€ì¸ì´ ëŒ€ì „ì— ì˜¨ë‹¤! â¤ë…¸ì¼ì˜ ë„ì‹œâ¤</p>
        <input type="button" value="ğŸˆì–´ë””ë¡œ ë†€ëŸ¬ê°€ì§€?" onclick="q1()">
      </div>
    </section>
    
    <table class="table" >
      <thead id="table">
        <!-- function q1() -->
      </thead>
    </table>
    
    <!-- <input type="button" value="ë‚ ì”¨ì •ë³´í™•ì¸" onclick="q2()"> -->

    <article>
      <div id="weatherarea" class="cf">
        <!-- <h2>ë‚ ì”¨ì •ë³´ ë„ì›Œì£¼ì…ˆ</h2>
        <p>í˜„ì¬ê¸°ì˜¨ : <span id="weather"></span></p> -->
      </div>
    </article>
    <!-- í˜„ì¬ì‹œê°„ì„ ì•Œë ¤ì£¼ëŠ” ê¸°ëŠ¥ -->
    <!-- <div id="times"></div> -->

    <footer>
      <p>&copy;2023.02.03.</p>
    </footer>


  </div>



  <script>
    function q1() {
      $('#table').empty(); // ê°ì²´ ë‚´ë¶€ë¥¼ ë¹„ì›Œì£¼ëŠ” ë©”ì„œë“œ
      $.ajax({ //jquery ajax
        type: "get", //getë°©ì‹ìœ¼ë¡œ ê°€ì ¸ì˜¤ê¸°
        url: "https://apis.data.go.kr/6300000/openapi2022/tourspot/gettourspot?serviceKey=DHnifGzphsHBU9ZZZOIQ2p7AKpc0MqGwDJLWOa5EdBxLHj%2F3orjE8PmWVyWC%2F1lbJES2Y4u2gGZjNfGygryQlA%3D%3D&pageNo=1&numOfRows=100", //ê°’ì„ ê°€ì ¸ì˜¬ ê²½ë¡œ
        dataType: "json", //html, xml, text, script, json, jsonp ë“± ë‹¤ì–‘í•˜ê²Œ ì“¸ ìˆ˜ ìˆìŒ
        success: function (response) {   //ìš”ì²­ ì„±ê³µì‹œ ì‹¤í–‰ë  ë©”ì„œë“œ
          console.log("í†µì‹ ì„±ê³µ");
          
          // #table ì‚­ì œ í›„ ë‹¤ì‹œ ë¶™ì—¬ë„£ê¸°
          // $("#table").remove()

          // console.log(response['response']['body']['items'][0]);
          // console.log(response['response']['body']['items'][0]['cnvenFcltGuid']);
          
          var name = document.querySelector('#name')
          var area = document.querySelector('#area')
          var webUrl = document.querySelector('#webUrl')

          var nm = response['response']['body']['items']
          // console.log(name, nm);

          // 0ë¶€í„° 99ê¹Œì§€ ì¶œë ¥
          // var random = Math.random(nm.length * 100);
          var random = Math.random(nm.length) * 100;
          console.log(random);
          console.log(Math.round(random));

          var tourspotNm = nm[Math.round(random)]['tourspotNm']
          var tourspotAddr = nm[Math.round(random)]['tourspotAddr']
          var urlAddr = nm[Math.round(random)]['urlAddr']

          var temp_html = `<tr>
                            <th scope="col">ê´€ê´‘ì§€ëª…</th>
                            <th scope="col">ìœ„ì¹˜</th>
                            <th scope="col">í™ˆí˜ì´ì§€</th>
                          </tr>
                          <tr>
                            <td id="name">${tourspotNm}</td>
                            <td id="area">${tourspotAddr}</td>
                            <td id="webUrl"><a href="${urlAddr}" target="_blank">í™ˆí˜ì´ì§€ ë°”ë¡œê°€ê¸°</a></td>
                          </tr>`
          
          // temp_html ë¶™ì—¬ë„£ê¸°
          $('#table').append(temp_html)

          // function response() {
                    
          // }

          

          // ë°ì´í„° ì „ì²´ë¥¼ ë½‘ì•„ì¤Œ.
          // for (var i=0; i < random; i++) {
          //   var tourspotNm = nm[i]['tourspotNm']
          //   var tourspotAddr = nm[i]['tourspotAddr']
          //   var urlAddr = nm[i]['urlAddr']

          //   var temp_html = `<tr>
          //                     <td id="name">${tourspotNm}</td>
          //                     <td id="area">${tourspotAddr}</td>
          //                     <td id="webUrl"><a href="${urlAddr}" target="_blank">í™ˆí˜ì´ì§€ ë°”ë¡œê°€ê¸°</a></td>
          //                   </tr>`
          //   $('#table').append(temp_html)

          // }

          

        },
        error: function () {		 //ìš”ì²­ ì‹¤íŒ¨ì‹œ ì—ëŸ¬ í™•ì¸ì„ ìœ„í•¨
          console.log("í†µì‹ ì—ëŸ¬");
        }
      })
    }
    q1()

    function q2() {
      $('#weatherarea').empty();
      // fetch = ìµœì‹ ë²„ì „, ëª¨ë“  ì •ë³´ë¥¼ ë½‘ì•„ì¤Œ.
      // fetch('https://goweather.herokuapp.com/weather/daejeon')
      // .then((response) => response.json())
      // .then((data) => console.log(data));

      fetch('http://goweather.herokuapp.com/weather/daejeon')
      .then((response) => response.json())
      .then((data) => {
          credentials: "include" // í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°€ í†µì‹ í• ë•Œ ì¿ í‚¤ì™€ ê°™ì€ ì¸ì¦ ì •ë³´ ê°’ì„ ê³µìœ í•˜ê² ë‹¤ëŠ” ì„¤ì •
          // ë‚ ì”¨ ì •ë³´ í™•ì¸
          // console.log(data['temperature'])
          
          var weatherData = data['temperature']
          console.log(weatherData);

          var weather = document.querySelector('#weather');
          // console.log(weather);

          var temp_html = `<h2>ëŒ€ì „ì˜ ë‚ ì”¨â›…</h2>
                            <p>í˜„ì¬ : <span id="weather">${weatherData}</span></p>`
          // console.log(temp_html);
          $('#weatherarea').append(temp_html)
      });
    }
    q2(); //ë§¨ì²˜ìŒì— í•œë²ˆ ì‹¤í–‰
    setInterval(q2, 3600000); //1ì‹œê°„ ì£¼ê¸°ë¡œ ìƒˆë¡œì‹¤í–‰

    

    function call() {
      const clock = document.querySelector("#times");

      function getClock(){
        const d = new Date();
        const h = String(d.getHours()).padStart(2,"0");
        const m = String(d.getMinutes()).padStart(2,"0");
        const s = String(d.getSeconds()).padStart(2,"0");
        clock.innerText = `${h}:${m}:${s}`;
      }
      getClock(); //ë§¨ì²˜ìŒì— í•œë²ˆ ì‹¤í–‰
    }
    call(); //ë§¨ì²˜ìŒì— í•œë²ˆ ì‹¤í–‰
    setInterval(call, 1000); //1ì´ˆ ì£¼ê¸°ë¡œ ìƒˆë¡œì‹¤í–‰


  </script>
  <!-- JavaScript Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
</body>
</html>